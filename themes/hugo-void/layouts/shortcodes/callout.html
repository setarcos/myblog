{{- $type := .Get "type" | default "info" -}}
{{- $title := .Get "title" -}}
{{- $content := .Inner -}}
{{- range $m := findRESubmatch `(?s)\$\$(.+?)\$\$` $content -}}
  {{- $full := index $m 0 -}}
  {{- $inner := index $m 1 -}}
  {{- $replacement := printf "\n<div class=\"callout-math\">$$%s$$</div>\n" $inner -}}
  {{- $content = replace $content $full $replacement -}}
{{- end -}}
{{- $rendered := $content | markdownify -}}

<div class="callout callout-{{ $type }} not-prose">
  <div class="callout-header">
    <span class="callout-icon" aria-hidden="true">
      {{- if eq $type "info" -}}
        <svg viewBox="0 0 1024 1024" fill="currentColor" aria-hidden="true"><path d="M512 97.52381c228.912762 0 414.47619 185.563429 414.47619 414.47619S740.912762 926.47619 512 926.47619 97.52381 740.912762 97.52381 512 283.087238 97.52381 512 97.52381zm0 73.142857C323.486476 170.666667 170.666667 323.486476 170.666667 512S323.486476 853.333333 512 853.333333 853.333333 700.513524 853.333333 512 700.513524 170.666667 512 170.666667zm36.571429 268.190476v292.571428h-73.142858V438.857143h73.142858zm0-121.904762v73.142857h-73.142858v-73.142857h73.142858z"/></svg>
      {{- else if eq $type "tip" -}}
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M11 3a7 7 0 00-4.546 12.248C7.907 16.169 9 17.388 9 19h6c0-1.612 1.093-2.831 2.546-3.752A7 7 0 0011 3zm1 18h-2a1 1 0 000 2h2a1 1 0 100-2z"/></svg>
      {{- else if eq $type "warning" -}}
        <svg viewBox="0 0 1024 1024" fill="currentColor" aria-hidden="true"><path d="M934.4 770.133333 605.866667 181.333333C586.666667 147.2 550.4 128 512 128s-74.666667 21.333333-93.866667 53.333333L89.6 770.133333c-19.2 34.133333-19.2 76.8 0 110.933334S145.066667 938.666667 183.466667 938.666667h657.066666c38.4 0 74.666667-21.333333 93.866667-57.6 19.2-34.133333 19.2-76.8 0-110.933334z m-55.466667 81.066667c-8.533333 14.933333-23.466667 23.466667-38.4 23.466667H183.466667c-14.933333 0-29.866667-8.533333-38.4-23.466667-8.533333-14.933333-8.533333-34.133333 0-49.066667L473.6 213.333333c8.533333-12.8 23.466667-21.333333 38.4-21.333333s29.866667 8.533333 38.4 21.333333l328.533333 588.8c8.533333 14.933333 8.533333 32 0 49.066667z"/><path d="M512 746.666667a42.666667 42.666667 0 1 0 42.666667 42.666666A42.666667 42.666667 0 0 0 512 746.666667zm0-117.333334c17.066667 0 32-14.933333 32-32v-192c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v192c0 17.066667 14.933333 32 32 32z"/></svg>
      {{- else if eq $type "danger" -}}
        <svg viewBox="0 0 1024 1024" fill="currentColor" aria-hidden="true"><path d="M512 38.4A473.6 473.6 0 1 0 985.6 512 473.6 473.6 0 0 0 512 38.4zm199.648 603.584-69.664 69.664L512 581.664 382.016 711.648l-69.664-69.664L442.336 512l-129.984-129.984 69.664-69.664L512 442.336l129.984-129.984 69.664 69.664L581.664 512z"/></svg>
      {{- else if eq $type "neutral" -}}
        <svg viewBox="0 0 1024 1024" fill="currentColor" aria-hidden="true"><path d="M521.396706 512.301176m-421.647059 0a421.647059 421.647059 0 1 0 843.294118 0 421.647059 421.647059 0 1 0-843.294118 0Z" opacity=".25"/><path d="M521.396706 512.301176m-361.411765 0a361.411765 361.411765 0 1 0 722.82353 0 361.411765 361.411765 0 1 0-722.82353 0Z" opacity=".6"/></svg>
      {{- else -}}
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M13 16h-1v-4h-1V9h2m-1-7a10 10 0 1010 10A10.011 10.011 0 0012 2z"/></svg>
      {{- end -}}
    </span>
    {{- with $title -}}
      <span class="callout-title">{{ . }}</span>
    {{- end -}}
  </div>
  <div class="callout-content prose prose-sm sm:prose max-w-none dark:prose-invert">
    {{- $rendered -}}
  </div>
</div>
