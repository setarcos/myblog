---
title: monitor the interface other than 802.3
created: !!timestamp '2014-05-06 23:30:11'
tags:
    - networking 
---

{% mark excerpt -%}

从前只用 wireshark 监听过有线以太网，这次尝试一下无线。

{%- endmark %}

# 问题描述

监听有线以太网比较简单，不需要特殊的设置，只要启动 wireshark 就可以自动把网卡设置在混杂模式下，可以监听到网线上的一切信息。但对于 wifi 就不一样了，一般情况下监听到只是用户数据，连以太网头部都是伪造的。

# 使用 aircrack

首先需要下载 aircrack，编译安装不在话下。之后的过程就比较简单了。

    # ifconfig wlan0 down
    # airmon-ng start wlan0

此时会多了一个 mon0 网络接口，启动 wireshark 监听这个接口就可以看到 802.11 协议的内容了。

如果能监听到握手数据包，再配合密码本，就可以使用 aircrack 来破解网络密码了，这个可以使用 aircrack 自带的示例报文 wpa.cap 来测试，如果要实际运用可能需要一个比较好的密码本。

# 恢复 wifi 功能

如果要恢复 wifi 上网，还需要执行下面的命令

    # ifconfig mon0 down
    # airmon-ng stop wlan0
    # ifconfig wlan0 up
